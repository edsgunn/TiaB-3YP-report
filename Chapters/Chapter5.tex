% Chapter Template
\documentclass{standalone}
 
% Required package
\documentclass{beamer}
\usepackage{tikz}
\usetikzlibrary{arrows.meta, positioning}

\chapter{Audio Processing} % Main chapter title

\label{Chapter5} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}
Before we feed the audio clip to our machine learning model, it is crucial to get rid of the noise as to achieve higher accuracy.
The choice and implementation of noise filter will then be explained in \textbf{LINK TO SECTION 1}. We then feed the filtered output 
to a pitch detection algorithm (PDA) \textbf{lINK TO SECTION 2} and then a key detection algorithm (KDA) \textbf{LINK TO SECTION 3}
 
\begin{frame}[fragile]
\frametitle{General Settings 1}
    \begin{figure}
\tikzset{
every edge/.style = {draw=cyan, line width=2mm, shorten >=1pt, shorten <=1pt,
                     -{Triangle[scale=0.6]}},
N/.style args = {#1/#2}{fill=#1, text width=#2, 
                        font=\scriptsize, align=center},
   N/.default = cyan/7em,
}
\newcommand\tn[1]{\textbf{\small #1}}
    \begin{tikzpicture}[node distance=8mm]
\node (n1) [N]  {\tn{User sings into our app}\\ 
                 (Obtain input audio signal)}; 
\node (n2) [N=cyan/8em, right=of n1] 
                {\tn{Trim silence at the start/end of audio clip};
\node (n3) [N, right=of n2] 
                {\tn{Implement noise filter}};
\node (n4) [N, below=of n3]
                {\tn{Spectral reduction}};
\node (n5) [N, right=of n4]
                {\tn{Low-pass filter}};
\node (n6) [N, right=of n3] 
                {\tn{Implement PDA}};
\node (n7) [N, right=of n6] 
                {\tn{Implement KDA}};
\node (n8) [N=red!30/8em, below=of n7]
                {\tn{Pass the output to Ed's ML model}\\
				(Notes and keys)};

\draw   (n1) edge (n2)
        (n2) edge (n3)
        (n3) edge (n4)
		(n4) edge (n5)
        (n3) edge (n6)
        (n6) edge (n7)
		(n7) edge (n8));
    \end{tikzpicture}
\end{figure}
\end{frame}
%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------

\section{Noise Filter}

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam ultricies lacinia euismod. Nam tempus risus in dolor rhoncus in interdum enim tincidunt. Donec vel nunc neque. In condimentum ullamcorper quam non consequat. Fusce sagittis tempor feugiat. Fusce magna erat, molestie eu convallis ut, tempus sed arcu. Quisque molestie, ante a tincidunt ullamcorper, sapien enim dignissim lacus, in semper nibh erat lobortis purus. Integer dapibus ligula ac risus convallis pellentesque.

%-----------------------------------
%	SUBSECTION 1
%-----------------------------------
\subsection{Possible Models}

A. Low-pass filter
Transform time-signal to frequency-signal using fourier transform
Cutoff frequency selection: depending on the gender and age
Window function: (most simple) rectangular function/ hamming/ hanning window

B. Wavelet transform
Wavelet transform creates a representation of the signal in both time and frequency domain so localized information of the signal can be efficiently accessed. Fourier transform (FT) has limitations: 
	For windowed FT, if the feature is larger or shorter than the window, it cannot be captured completely.
	Time resolution for high frequencies is the same for low frequencies. As frequency increases, rate of change of the signal increases, and high frequency signals contain more information in a window than that of low frequency, thus we need a higher time resolution for that.
Usually for stationary signals, we use traditional fourier transform, but for non-stationary ones, we can use wavelet transform, in particular continuous wavelet transform (CWT) which gives better time-scale information compared to short-time fourier transform (STFT). 
 
Wavelet transform analyses a signal into different frequencies at different resolution (multiresolution analysis). 

Advantages of DWT:
	The wavelet expansion allows a more accurate local description and separation of signal characteristics. A Fourier coefficient represents a component that lasts for all time and, therefore, temporary events must be described by a phase characteristic that allows cancellation or reinforcement over large time periods. A wavelet expansion coefficient represents a component that is itself local and is easier to interpret. The wavelet expansion may allow a separation of components of a signal whose Fourier description overlap in both time and frequency.
	Wavelets are adjustable and adaptable. Because there is not just one wavelet, they can be designed to fit individual applications. They are ideal for adaptive systems that adjust themselves to suit the signal.
Disadvantages of DWT:
	Sensitive to shifting
	Poor directionality
	Lack of phase information
	Hard to choose an appropriate mother wavelet and number of decomposition levels

C. PCA
Computes eigenvalue, eigenvector pair. Then select the dominant values as principal component (since they explain most of the variance in the signal) and ignore the smaller eigenvalue and eigenvectors.
The method helps reducing dimensionality but does not eliminate noise. It is also sensitive to relative scaling of other variables 


D. Spectral reduction
Define our noisy audio y(n) = x(n) + d(n), for 0<= n <= N-1, where x(n) is our original signal (signal we wish to recover), d(n) is the noise, n is the time index, N is the number of samples. 
Assuming d(n) and x(n) have no correlation, Y(omega)= 
Used by audacity
https://github.com/timsainb/noisereduce
	Did a really good job, able to filter white noise, but not sudden background noise (I accidentally used an audio with a sharp squeal in the beginning and it didnâ€™t get filtered, which makes sense if we think about spectral subtraction, it is impossible to subtract an unexpected frequency)
	Will use spectral reduction in our project!!! 

%-----------------------------------
%	SUBSECTION 2
%-----------------------------------

\subsection{Assumptions}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.

%-----------------------------------
%	SUBSECTION 3
%-----------------------------------

\subsection{Implementation}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.

%-----------------------------------
%	SUBSECTION 4
%-----------------------------------

\subsection{Improvements}
use the silence to feed in spectral reduction

%----------------------------------------------------------------------------------------
%	SECTION 2
%----------------------------------------------------------------------------------------

\section{Pitch Detection Algorithm (PDA)}

Sed ullamcorper quam eu nisl interdum at interdum enim egestas. Aliquam placerat justo sed lectus lobortis ut porta nisl porttitor. Vestibulum mi dolor, lacinia molestie gravida at, tempus vitae ligula. Donec eget quam sapien, in viverra eros. Donec pellentesque justo a massa fringilla non vestibulum metus vestibulum. Vestibulum in orci quis felis tempor lacinia. Vivamus ornare ultrices facilisis. Ut hendrerit volutpat vulputate. Morbi condimentum venenatis augue, id porta ipsum vulputate in. Curabitur luctus tempus justo. Vestibulum risus lectus, adipiscing nec condimentum quis, condimentum nec nisl. Aliquam dictum sagittis velit sed iaculis. Morbi tristique augue sit amet nulla pulvinar id facilisis ligula mollis. Nam elit libero, tincidunt ut aliquam at, molestie in quam. Aenean rhoncus vehicula hendrerit.

%-----------------------------------
%	SUBSECTION 1
%-----------------------------------
\subsection{Possible Models}

Nunc posuere quam at lectus tristique eu ultrices augue venenatis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam erat volutpat. Vivamus sodales tortor eget quam adipiscing in vulputate ante ullamcorper. Sed eros ante, lacinia et sollicitudin et, aliquam sit amet augue. In hac habitasse platea dictumst.

%-----------------------------------
%	SUBSECTION 2
%-----------------------------------

\subsection{Assumptions}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.

%-----------------------------------
%	SUBSECTION 3
%-----------------------------------

\subsection{Implementation}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.

%----------------------------------------------------------------------------------------
%	SECTION 3
%----------------------------------------------------------------------------------------

\section{Key Detection Algorithm (KDA)}

Sed ullamcorper quam eu nisl interdum at interdum enim egestas. Aliquam placerat justo sed lectus lobortis ut porta nisl porttitor. Vestibulum mi dolor, lacinia molestie gravida at, tempus vitae ligula. Donec eget quam sapien, in viverra eros. Donec pellentesque justo a massa fringilla non vestibulum metus vestibulum. Vestibulum in orci quis felis tempor lacinia. Vivamus ornare ultrices facilisis. Ut hendrerit volutpat vulputate. Morbi condimentum venenatis augue, id porta ipsum vulputate in. Curabitur luctus tempus justo. Vestibulum risus lectus, adipiscing nec condimentum quis, condimentum nec nisl. Aliquam dictum sagittis velit sed iaculis. Morbi tristique augue sit amet nulla pulvinar id facilisis ligula mollis. Nam elit libero, tincidunt ut aliquam at, molestie in quam. Aenean rhoncus vehicula hendrerit.

%-----------------------------------
%	SUBSECTION 1
%-----------------------------------
\subsection{Possible Models}

Nunc posuere quam at lectus tristique eu ultrices augue venenatis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aliquam erat volutpat. Vivamus sodales tortor eget quam adipiscing in vulputate ante ullamcorper. Sed eros ante, lacinia et sollicitudin et, aliquam sit amet augue. In hac habitasse platea dictumst.

%-----------------------------------
%	SUBSECTION 2
%-----------------------------------

\subsection{Assumptions}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.

%-----------------------------------
%	SUBSECTION 3
%-----------------------------------

\subsection{Implementation}
Morbi rutrum odio eget arcu adipiscing sodales. Aenean et purus a est pulvinar pellentesque. Cras in elit neque, quis varius elit. Phasellus fringilla, nibh eu tempus venenatis, dolor elit posuere quam, quis adipiscing urna leo nec orci. Sed nec nulla auctor odio aliquet consequat. Ut nec nulla in ante ullamcorper aliquam at sed dolor. Phasellus fermentum magna in augue gravida cursus. Cras sed pretium lorem. Pellentesque eget ornare odio. Proin accumsan, massa viverra cursus pharetra, ipsum nisi lobortis velit, a malesuada dolor lorem eu neque.
